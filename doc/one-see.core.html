<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>one-see.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">one-see</span> <span class="project-version">version 0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>one-see</span></div></div></li><li class="depth-2 branch current"><a href="one-see.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="one-see.scratch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scratch</span></div></a></li></ul><ul class="index-link"><li class="depth-1"><a href="https://github.com/blosavio/one-see">Project Home</a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="one-see.core.html#var-RowStack"><div class="inner"><span>RowStack</span></div></a></li><li class="depth-2 branch"><a href="one-see.core.html#var-all"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>all</span></div></a></li><li class="depth-2 branch"><a href="one-see.core.html#var-delete"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-2 branch"><a href="one-see.core.html#var-get-row"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-row</span></div></a></li><li class="depth-2 branch"><a href="one-see.core.html#var-get-val"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-val</span></div></a></li><li class="depth-2 branch"><a href="one-see.core.html#var-push"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>push</span></div></a></li><li class="depth-2"><a href="one-see.core.html#var-size"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>size</span></div></a></li><li class="depth-1"><a href="one-see.core.html#var-stack-rows"><div class="inner"><span>stack-rows</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">one-see.core</h1><div class="doc"><div class="markdown"><p>A lightweight utility for establishing and querying one-to-one-to-one-to-one relationships.</p>
</div></div><div class="public anchor" id="var-RowStack"><h3>RowStack</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Operations for manipulating a sequential of hashmaps/records. Every <code>push</code>-ed hashmap/record:</p>
<ol>
<li>Must include exactly the keys/fields of existing elements, if any, and</li>
<li>The value of each field must be unique from those of the other existing elements.</li>
</ol>
<p>Instances implement the <code>invoke</code> methods of <code>clojure.lang.IFn</code> with <a href="one-see.core.html#var-get-val">get-val</a>.</p>
<p>Sample data for following examples.</p>
<pre><code class="language-clojure">(defrecord Flower [flower color id])

(def flowers (stack-rows [["rose" :red 101]
                          ["hibiscus" :orange 102]
                          ["sunflower" :yellow 103]]
                         -&gt;Flower))
</code></pre>
</div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-all"><h3>all</h3><div class="usage"><code>(all this)</code></div><div class="doc"><div class="markdown"><p>Returns all rows of the internal representation of a <code>RowStack</code> instance, a plain Clojure sequential of hashmaps/records.</p>
<p>Note: The returned sequential will not maintain a <code>RowStack</code> instance’s uniqueness guarantees.</p>
<p>Example:</p>
<pre><code class="language-clojure">(all flowers)
;; =&gt; [#one_see.core.Flower{:flower "rose", :color :red, :id 101}
;;     #one_see.core.Flower{:flower "hibiscus", :color :orange, :id 102}
;;     #one_see.core.Flower{:flower "sunflower", :color :yellow, :id 103}]
</code></pre>
</div></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete this m)</code></div><div class="doc"><div class="markdown"><p>Returns a new <code>RowStack</code> instance with hashmap/record <code>m</code> removed.</p>
<p>Example:</p>
<pre><code class="language-clojure">(all (delete flowers (-&gt;Flower "hibiscus" :orange 102)))
;; =&gt; [#one_see.core.Flower{:flower "rose", :color :red, :id 101}
;;     #one_see.core.Flower{:flower "sunflower", :color :yellow, :id 103}]
</code></pre>
</div></div></div><div class="public anchor" id="var-get-row"><h3>get-row</h3><div class="usage"><code>(get-row this field value)</code><code>(get-row this field value not-found)</code></div><div class="doc"><div class="markdown"><p>Returns the row, a hashmap/record, for which <code>field</code> is associated to <code>value</code>. If none match, returns <code>nil</code> or <code>not-found</code>.</p>
<p>Example:</p>
<pre><code class="language-clojure">(get-row flowers :id 103)
;; =&gt; #one_see.core.Flower{:flower "sunflower", :color :yellow, :id 103}
</code></pre>
</div></div></div><div class="public anchor" id="var-get-val"><h3>get-val</h3><div class="usage"><code>(get-val this field-1 value-1 field-2)</code><code>(get-val this field-1 value-1 field-2 not-found)</code></div><div class="doc"><div class="markdown"><p>From the row whose <code>field-1</code> is <code>value-1</code>, returns the value associated to <code>field-2</code>.</p>
<p>Example, explicit invocation:</p>
<pre><code class="language-clojure">(get-val flowers :color :orange :flower)
;; =&gt; "hibiscus"
</code></pre>
<p><code>get-val</code> supplies the <code>invoke</code> method, so a <code>RowStack</code> instance in the function postion consumes this argument sequence.</p>
<p>Example, implicit invocation:</p>
<pre><code class="language-clojure">(flowers :color :orange :flower)
;; =&gt; "hibiscus"
</code></pre>
</div></div></div><div class="public anchor" id="var-push"><h3>push</h3><div class="usage"><code>(push this m)</code></div><div class="doc"><div class="markdown"><p>Returns a new <code>RowStack</code> instance with appended hashmap/record <code>m</code> if and only if the fields exactly match and the values are unique from all other rows. Otherwise, throws an exception.</p>
<p>Prefer the higher-level <a href="one-see.core.html#var-stack-rows">stack-rows</a> for constructing an instance.</p>
<p>Example:</p>
<pre><code class="language-clojure">(all (push flowers (-&gt;Flower "daffodil" :white 104)))
;; [#one_see.core.Flower{:flower "rose", :color :red, :id 101}
;;  #one_see.core.Flower{:flower "hibiscus", :color :orange, :id 102}
;;  #one_see.core.Flower{:flower "sunflower", :color :yellow, :id 103}
;;  #one_see.core.Flower{:flower "daffodil", :color :white, :id 104}]
</code></pre>
</div></div></div><div class="public anchor" id="var-size"><h3>size</h3><div class="usage"><code>(size this)</code></div><div class="doc"><div class="markdown"><p>Returns an array-map of a <code>RowStack</code> instance’s row and column count as <code>{:n-rows &lt;integer&gt; :n-cols &lt;integer&gt;}</code>.</p>
<p>Example:</p>
<pre><code class="language-clojure">(size flowers)
;; =&gt; {:n-rows 3, :n-cols 3}
</code></pre>
</div></div></div></div></div><div class="src-link"><a href="https://github.com/blosavio/one-see/blob/master/src/one_see/core.clj#L40">view source</a></div></div><div class="public anchor" id="var-stack-rows"><h3>stack-rows</h3><div class="usage"><code>(stack-rows s)</code><code>(stack-rows s -&gt;rec)</code></div><div class="doc"><div class="markdown"><p>Returns a <code>RowStack</code> instance. If given only a sequential <code>s</code> of hashmaps, directly <a href="one-see.core.html#var-push">push</a>-es the elements of <code>s</code>. If given a sequential <code>s</code> of field values and a record constructor <code>-&gt;rec</code>, invokes the constructor with the elements of <code>s</code> before <code>push</code>-ing.</p>
<p>Throws an exception if key/fields don’t exactly match or if a value is not unique within its column.</p>
<p>Example, 1-arity consuming hash-maps:</p>
<pre><code class="language-clojure">(stack-rows [{:flower "rose" :color :red :id 101}
             {:flower "hibiscus" :color :orange :id 102}
             {:flower "sunflower" :color :yellow :id 103}])
</code></pre>
<p>Example, 2-arity consuming records:</p>
<pre><code class="language-clojure">(defrecord flower-color [flower color id])

(stack-rows [["rose" :red 101]
             ["hibiscus" :orange 102]
             ["sunflower" :yellow 103]] -&gt;flower-color)
</code></pre>
</div></div><div class="src-link"><a href="https://github.com/blosavio/one-see/blob/master/src/one_see/core.clj#L202">view source</a></div></div></div></body></html>